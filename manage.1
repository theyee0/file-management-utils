.\"Modified from man(1) of FreeBSD, the NetBSD mdoc.template, and mdoc.samples.
.\"See Also:
.\"man mdoc.samples for a complete listing of options
.\"man mdoc for the short list of editing options
.\"/usr/share/misc/mdoc.template
.Dd 8/14/25               \" DATE
.Dt manage.sh 1
.Os Linux
.Sh NAME
.Nm manage.sh
.\" The following lines are read in generating the apropos(man -k) database. Use only key
.\" words here as the database is built based on the words here and in the .ND line.
.\" Use .Nm macro to designate other names for the documented program.
.Nd Manage files in deeply nested directories
.Sh SYNOPSIS
.Nm
[OPTION]... SOURCE
.Sh DESCRIPTION
Perform operations on SOURCE directory.
.Pp
Multiple operations can be performed in a single invocation. Flags will be
evaluated in the order they are received.
.Pp
The program will automatically assume that the final parameter is not related to
any other flag, and moreover represents the source of the files.
.Bl -tag -width Ds
.It Fl f, --flatten-directory
Copies all nested files to a flat, specified output directory, set with
.Fl o
.It Fl e, --list-extensions
Traverses all files in SOURCE and prints filename extensions to
.Ar stdout
.It Fl n, --list-filenames
Prints all filenames in SOURCE
.It Fl c, --copy-regex Ar pattern
Copy all files from SOURCE matching
.Ar pattern
to a flat, specified output directory, set with
.Fl o
.It Fl d, --delete-regex Ar pattern
Delete all files matching a
.Ar pattern
.It Fl t, --trash-regex Ar pattern
Trash all files matching
.Ar pattern
to
.Pa ~/.local/Trash
.It Fl m, --move-regex Ar pattern
Moves all files matching
.Ar pattern
to a flat, specified output directory, set with
.Fl o
.It Fl o, --output
Sets the output directory; default is the current directory
.It Fl h, --help
Displays help
.It Fl -copy-stdin
Copies all files piped in through
.Ar stdin
into the output directory
.It Fl -delete-stdin
Deletes files piped in through
.Ar stdin
.It Fl -trash-stdin
Trashes files piped in through
.Ar stdin
to
.Pa ~/.local/Trash
.It Fl -move-stdin
Moves all files piped in through
.Ar stdin
into a flat output directory, set with
.Fl o
.It Fl -substitute-regex Ar matched-pattern,substituted-string
Copies files containing
.Ar matched-pattern
into an output directory set with
.Fl o
while preserving nesting and substituting all substrings
.Ar matched-pattern
with
.Ar substituted-string.
If the destructive flag is set, this operation will be done in-place.
.It Fl -clip-regex-end Ar pattern
Copies files ending in
.Ar pattern
into an output directory set with
.Fl o
while preserving nesting and truncating the ending
.Ar pattern.
If the destructive flag is set, this operation will be done in-place.
.It Fl -copy-extension Ar pattern
Copies all files ending in
.Ar pattern
to the a flat specified output directory set with
.Fl o.
The leading . is not automatically added to
.Ar pattern
.It Fl -delete-extension Ar pattern
Deletes files ending in
.Ar pattern.
The leading . is not automatically added to
.Ar pattern
.It Fl -trash-extension
Trashes files ending in
.Ar pattern
to
.Pa ~/.local/share/Trash.
The leading . is not automatically added to
.Ar pattern
.It Fl -move-extension
Moves all files ending in
.Ar pattern
to the a flat specified output directory set with
.Fl o.
The leading . is not automatically added to
.Ar pattern
.It Fl -destructive
Indicates that the source of the files does not need to be preserved. In
renaming or substitution operations, this will cause the files to be renamed
in place. In
.Fl f/--flatten,
this will automatically destroy the input directory.
.El
.Sh EXAMPLES
.Pp
An example is provided for each flag below, using the
.Pa ~/Pictures
directory as an example. Any instances of
.Fl o
and
.Fl -destructive
are optional and intended just as examples of their usage.
.Pp
Flatten a directory in-place (
.Fl f
):
.Dl ./manage.sh -o ~/Pictures --destructive -f ~/Pictures
List all extensions (
.Fl e
):
.Dl ./manage.sh -e ~/Pictures
List all filenames (
.Fl n
):
.Dl ./manage.sh -n ~/Pictures
Copy files matching a regex (
.Fl c
):
.Dl ./manage.sh -o ~/Pictures -c ".*\.jpg" ~/Pictures
Permanently delete files matching a regex (
.Fl d
):
.Dl ./manage.sh -d ".*\.jpg" ~/Pictures
Trash files matching a regex (
.Fl t
):
.Dl ./manage.sh -t ".*\.jpg" ~/Pictures
Move files matching a regex (
.Fl t
):
.Dl ./manage.sh -o ~/Pictures -m ".*\.jpg" ~/Pictures
Copy files piped from standard input:
.Dl find . -type f | ./manage.sh -o ~/Pictures --copy-stdin
Permanently delete files piped from standard input:
.Dl find . -type f | ./manage.sh --delete-stdin
Trash files piped from standard input:
.Dl find . -type f | ./manage.sh --trash-stdin
Move files piped from standard input:
.Dl find . -type f | ./manage.sh -o ~/Pictures --move-stdin
Rename files with regular expressions:
.Dl ./manage.sh -o ~/Pictures --substitute-regex "\.jpg,.png" ~/Downloads
Remove specific file endings:
.Dl ./manage.sh -o ~/Pictures --clip-regex-end "\.jpg" ~/Downloads
Copy files with specific file endings:
.Dl ./manage.sh -o ~/Pictures --copy-extension "\.jpg" ~/Downloads
Permanently delete files with specific file endings:
.Dl ./manage.sh --delete-extension "\.jpg" ~/Downloads
Trash files with specific file endings:
.Dl ./manage.sh --delete-extension "\.jpg" ~/Downloads
Move files with specific file endings:
.Dl ./manage.sh -o ~/Pictures --copy-extension "\.jpg" ~/Downloads
.Sh SEE ALSO
.\" List links in ascending order by section, alphabetically within a section.
.\" Please do not reference files that do not exist without filing a bug report
.Xr cp 1 ,
.Xr find 1 ,
.Xr mv 1 ,
.Xr sed 1 ,
.Xr xargs 1 ,
